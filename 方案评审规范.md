前言：方案评审，一般包括需求方案评审和技术方案评审，两者虽然存在很多相似的地方，但是统一来论，并不太合适，比如需求方案评审一般需要产品参与，而技术方案评审一般则不需要。本文档规范，主要是指技术方案评审规范。
# 一、评审目的
为何需要技术评审，技术评审的作用是什么了？
1. 把关确保方案合格，各方面都考虑到了，避免缺陷和遗漏，不求方案多牛，至少不犯错。
2. 保证架构设计合理和基本一致，符合整体原则。
3. 维持对系统架构的全局认知，避免黑盒效应。
4. 通过评审发掘创新亮点，推广最佳实践。

由此可见，技术评审在我们的日常开发中，具有重要意义。因此，为了指导中心架构技术方案评审活动的开展，规范评审流程，提高评审质量和效率，特制定此技术评审规范。
# 二、评审角色
| 角色	| 职责                                                | 	如何确定 |  
| ----  |---------------------------------------------------|-------|
|作者	| 发起评审请求预定会议，准备评审材料；<br> 负责对方案细节以及评审中的问题作出解释；<br> 跟进逻辑评审发现的问题 | 	无    |
|评审成员	| 参与评审；<br> 讨论发现评审方案的问题	                                 | 项目相关人员 | 
| 评审组长	| 综合评审意见，给出评审结论，比如方案过还是不过；	|一般是Tech Lead/组长，或者项目负责人  |
| 评审主持人	| 主持会议，并记录会议关键内容，会后发出会议纪要	 |一般是发起评审的作者，或者作者请一个人专门负责；|
# 三、评审要素
评审要素，主要是指评审哪些方面，一般主要包括：技术选型、技术架构、技术难点、性能瓶颈、资源需求、安全性情况等。
## 3.1、技术选型
为什么选用A组件不选用B、C组件，A是开源的，开源协议是啥？基于什么语言开发的，出了问题我们自身是否能够维护？性能方面有没有压测过？这些所有问题作为技术选型都需要考虑清楚，才能做最终决定。
## 3.2、技术架构
架构分层设计，组件与组件之间如何协同工作，如何部署等。
## 3.3、技术难点
明确存在的技术难点，确定可行性，具体为：
* 方案要能够落地，不能偏离实际。要根据可协调的资源进行设计。
* 代价要尽量小，能够分步骤进行，可阶段性验收。
## 3.4、性能瓶颈
我们目标的TPS、QPS是多少，SLA是多少，当前的方案是否可以满足，是否存在性能瓶颈的地方，如果有，如何应对。
## 3.5、资源需求
确定好方案的资源需求，资源主要是：
* 人力资源，设计阶段确定详尽的人力协调资源，需要那些人参与。
* 时间排期，按照里程碑对功能进行拆解、排期，能够达到估计大体工作量的程度。
## 3.6、安全性情况
相关功能是否违反了相关法律法规？是否收集了不该收集的东西？是否某些敏感信息没有做脱敏处理。是否有数据泄露的可能性？接口服务是否有防刷保护机制？数据、功能权限是否做了控制？

# 四、评审分类
技术评审，可以按照评审对象、评审方式，以及评审级别，划分为不同的类别。
## 4.1、按照评审对象分类
按照评审对象可以分为：架构设计方案评审、功能开发方案评审。
* 架构设计方案评审：主要是整体方案的设计，以及组件的选型评审。
* 功能开发方案评审：主要针对一个功能的开发完善的方案；
## 4.2、按照评审方式分类
按照评审方式，可以分为两类：
* 召开评审会议：以召开会议的方式进行评审；
* 私下方案对齐：线下点对点的对齐，达成一致；
## 4.3、按照评审级别分类
按照评审级别，可以分为：
* 项目级别：项目组内评审，一般由项目负责人主要参与；
* 小组级别：设计小组范围的评审，比如架构选型
* 中心级别：设计范围比较大的评审，比如涉及中心方向的技术方案，一般会设计到中心内多个小组，建议中心级别的方案评审。

# 五、评审组织形式
不同的场景，对应不同的评审方式，同时范围级别也不一样，一般原则如下：

| 评审对象 | 评审组成员 | 级别 | 形式 |
| ---- | ---- | ---- | ----|
|大型架构评审	|总监，Tech Lead，组长及项目主要负责人	|中心级	|必须是会议形式|
|一般架构评审	|组长，项目主要负责人，Tech Lead，总监（可选）|	小组级	|必须是会议形式|
|功能方案评审	|项目主要负责人，组长（可选），Tech Lead(可选）|	一般建议按照项目级别即可	可线下对齐，也可以组织会议|

其中，大型架构，一般架构，或者功能方案的界定为：
1. 涉及人员和影响范围，比如是一个中心的架构方向，涉及到中心很多人，那么就是大型架构了；
2. 排期时间，一般周以内即可完成的，算是功能方案范畴，周以外，需要的时间越长，是越大型的方案。

此外，表格中的“可选“是指可以选择邀不邀请相应的评审人员，此外被邀对象也可以选择参与或不参与评审。如果没有标注可选，就是必须邀请参与评审。
# 六、评审流程规范
流程规范，将针对“前期准备”、"方案评审“、”评审过后“三个阶段进行分别说明。
## 6.1、前期准备
前期准备，主要包括以下几个部分：
* 完成需求文档撰写。包括流程图、原型等。然后反复多次推演，看是否有漏洞，尽量把能考虑到的问题都准备好。
* 同核心人员小范围沟通，确保没有大问题。提前沟通好，有大问题提前找出来并解决，避免在评审会期间出现大问题，这样可能导致整个方案都无法执行。
* 提前同相关参与同学协调好评审时间。不要临时组织评审，不仅可能人无法到齐，大家手头有其他工作也会受到影响。
* 评审前将需求文档发给大家。让大家有时间提前了解基本信息，提高评审会效率。

* 注意方案的核心要素，至少需要包括以下几点：

| 文档要素                                                                                                     | 	要素说明                                                                                                                             |
|----------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------|
| 业务背景	| 业务背景中，至少需要说明以下两点：<br> 1. 存在什么问题，如果是现方案优化，需要说明现状是什么情况；如果是新方案设计，需要说明业务场景是什么 <br> 2. 解决到什么程度，比如优化到什么程度，解决哪些场景的问题                     |
| 方案设计	                                                                                                    | 方案设计中，至少需要这几张图：总体架构图、流程图                                                                                                          |
| 资源需求	                                                                                                    | 资源需求，需要说明需要谁支持，以及预计上线时间。<br> 1. 需要谁支持，有哪些人需要投入到这个需求的项目中，以及负责的内容是什么，上下游配合的人员是谁等；<br> 2. 预计上线时间，需求排期，可以让每个功能对应的负责人估时，确定测试时间及预计上线时间。 |

TODO：可以制定一个方案设计模版

## 6.2、方案评审
评审前，作者需要提前到场，调试会议设备，连接会议室话筒等，以免浪费大家时间。
讲解方案时，大致按照以下流程一步步说明方案设计：
1. 先讲需求背景。让大家知道为什么要，做了对用户和我们自身有什么价值；
2. 再讲方案设计。说明这个方案设计哪些模块，都是怎么解决的；
3. 最后讲风险和排期；

注意，评审中的每一个讨论点，每一个结论都需要记下来，如果是线上会议，需要开启会议录制。

## 6.3、评审过后
在评审会后，还需要做以下事情：
* 整理好讨论问题，并给出解决方案，更新技术文档；
* 如果还需再评审一次，则要准备约下一次评审会的时间；
* 如果方案确认，最好给出排期和规划；
* 发出会议记录，评审会上的每个问题点都有行动计划；
* 归档会议文档和资料，比如方案文档放到wiki中，录制视频放到中心微盘中。
